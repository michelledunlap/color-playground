<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Courier New', Courier, monospace;
            cursor: none; /* We use the crosshair */
            background-color: #808080;
            user-select: none; /* Stop text highlighting while clicking */
        }

        /* --- THE AXES --- */
        
        /* Left Axis: Lightness (White to Black) */
        .axis-y {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 20px;
            background: linear-gradient(to bottom, white, black);
            z-index: 2;
            border-right: 1px solid rgba(255,255,255,0.3);
        }
        
        /* Bottom Axis: Hue (The Spectrum) */
        .axis-x {
            position: absolute;
            left: 20px; /* Start after the Y axis */
            right: 0;
            bottom: 0;
            height: 20px;
            /* The standard CSS Hue Rainbow */
            background: linear-gradient(to right, 
                hsl(0, 100%, 50%), 
                hsl(60, 100%, 50%), 
                hsl(120, 100%, 50%), 
                hsl(180, 100%, 50%), 
                hsl(240, 100%, 50%), 
                hsl(300, 100%, 50%), 
                hsl(360, 100%, 50%)
            );
            z-index: 2;
            border-top: 1px solid rgba(255,255,255,0.3);
        }

        /* --- THE GRID & HUD --- */

        .grid {
            position: absolute;
            top: 0; left: 20px; right: 0; bottom: 20px; /* Respect axes */
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
        }

        #hud {
            position: fixed;
            background: rgba(0, 0, 0, 0.85);
            color: #00ffcc;
            padding: 15px;
            border-radius: 4px;
            cursor: pointer; /* Suggests clickable */
            z-index: 100;
            width: 200px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            font-size: 13px;
            border: 1px solid #00ffcc;
        }

        /* HUD Positioning Classes */
        .pos-tl { top: 30px; left: 40px; }
        .pos-tr { top: 30px; right: 30px; }
        .pos-br { bottom: 40px; right: 30px; }
        .pos-bl { bottom: 40px; left: 40px; }

        /* --- CURSOR & STAMPS --- */

        #cursor {
            position: absolute;
            pointer-events: none;
            z-index: 5;
        }
        /* Crosshairs go all the way to the axes */
        .hair-x { position: absolute; width: 100vw; height: 1px; background: rgba(255,255,255,0.4); left: -100vw; top: 0; }
        .hair-y { position: absolute; width: 1px; height: 100vh; background: rgba(255,255,255,0.4); left: 0; top: -100vh; }

        .stamp {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid white;
            transform: translate(-50%, -50%);
            z-index: 1;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>

    <div class="axis-y"></div>
    <div class="axis-x"></div>

    <div class="grid"></div>

    <div id="hud" class="pos-tl" onclick="moveHud()">
        <strong>Color Graph Mode</strong><br>
        <span style="font-size:0.8em; color:#ccc;">(Click this box to move it)</span><br><br>
        ↔ HUE: <span id="val-hue">0</span>°<br>
        ↕ LIGHT: <span id="val-light">50</span>%<br>
        ⟳ SAT: <span id="val-sat">100</span>%<br><br>
        <em>[Space] to Stamp</em>
    </div>

    <div id="cursor">
        <div class="hair-x"></div>
        <div class="hair-y"></div>
    </div>

    <script>
        // State
        let hue = 180;
        let sat = 100;
        let light = 50;
        
        // Offset for the axes (20px)
        const offset = 20;
        
        // Elements
        const cursor = document.getElementById('cursor');
        const hud = document.getElementById('hud');

        function getDimensions() {
            return {
                w: window.innerWidth - offset, // Usable width
                h: window.innerHeight - offset // Usable height
            };
        }

        function render() {
            document.body.style.backgroundColor = `hsl(${hue}, ${sat}%, ${light}%)`;
            
            document.getElementById('val-hue').innerText = hue;
            document.getElementById('val-light').innerText = light;
            document.getElementById('val-sat').innerText = sat;

            // Math to position crosshair
            const dims = getDimensions();
            // x position starts after the 20px left axis
            const x = offset + ((hue / 360) * dims.w);
            // y position accounts for the fact that 0% light is at the bottom (height)
            const y = ((100 - light) / 100) * dims.h;
            
            cursor.style.left = x + 'px';
            cursor.style.top = y + 'px';
        }

        // --- CONTROLS ---

        // 1. Mouse Move
        document.addEventListener('mousemove', (e) => {
            const dims = getDimensions();
            
            // Clamp mouse inside the usable area (ignoring the axis bars)
            let mouseX = Math.max(0, e.clientX - offset);
            let mouseY = Math.min(dims.h, e.clientY); // Don't go below bottom axis

            hue = Math.round((mouseX / dims.w) * 360);
            // Clamp hue to 0-360
            hue = Math.max(0, Math.min(360, hue));

            // Invert Y for lightness
            light = Math.round((1 - (mouseY / dims.h)) * 100);
            light = Math.max(0, Math.min(100, light));

            render();
        });

        // 2. Scroll for Saturation
        document.addEventListener('wheel', (e) => {
            if (e.deltaY > 0) sat = Math.max(0, sat - 5);
            else sat = Math.min(100, sat + 5);
            render();
        });

        // 3. Arrow Keys
        document.addEventListener('keydown', (e) => {
            const step = 2;
            
            if (e.key === "ArrowRight") hue = (hue + step) % 360;
            if (e.key === "ArrowLeft") hue = (hue - step + 360) % 360;
            if (e.key === "ArrowUp") light = Math.min(100, light + step);
            if (e.key === "ArrowDown") light = Math.max(0, light - step);

            // 4. Spacebar or Enter to Stamp
            if (e.code === "Space" || e.code === "Enter") {
                createStamp();
            }

            render();
        });

        // 5. Click to Stamp (only if not clicking HUD)
        document.addEventListener('click', (e) => {
            // If we clicked the HUD, don't stamp
            if (e.target.closest('#hud')) return;
            createStamp();
        });

        // --- UTILS ---

        function createStamp() {
            const stamp = document.createElement('div');
            stamp.classList.add('stamp');
            
            // Current cursor position
            stamp.style.left = cursor.style.left;
            stamp.style.top = cursor.style.top;
            stamp.style.backgroundColor = document.body.style.backgroundColor;

            document.body.appendChild(stamp);
        }

        // HUD Corner Hopper
        const positions = ['pos-tl', 'pos-tr', 'pos-br', 'pos-bl'];
        let currentPos = 0;

        function moveHud() {
            hud.classList.remove(positions[currentPos]);
            currentPos = (currentPos + 1) % positions.length;
            hud.classList.add(positions[currentPos]);
        }

        // Handle Resize
        window.addEventListener('resize', render);

        render();
    </script>
</body>
</html>
